{"version":3,"sources":["index.min.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","getFavicons","url","x","config","selectors","join","href","content","property","rel","name","sizes","fetchFavicon","size","fetchFavicons","then","favicons","active","find","favicon","Promise","resolve","reject","err","push","Url","map","f","Math","min","apply","split","undefined","markActiveFavicon","Object","defineProperty","value","predicates","s","_interopRequireDefault","obj","__esModule","default","minSize","_loop","i","result","_config2","length","_ret","_config"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"x-ray\"), require(\"url\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"x-ray\", \"url\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fetchFavicon\"] = factory(require(\"x-ray\"), require(\"url\"));\n\telse\n\t\troot[\"fetchFavicon\"] = factory(root[\"x-ray\"], root[\"url\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.fetchFavicon = fetchFavicon;\n\texports.fetchFavicons = fetchFavicons;\n\tvar x = __webpack_require__(1)();\n\tvar Url = __webpack_require__(2);\n\tvar config = __webpack_require__(3);\n\tvar markActiveFavicon = __webpack_require__(4).default;\n\t\n\tfunction getFavicons(url) {\n\t  return x(url, config.selectors.join(), [{\n\t    href: '@href',\n\t    content: '@content',\n\t    property: '@property',\n\t    rel: '@rel',\n\t    name: '@name',\n\t    sizes: '@sizes'\n\t  }]);\n\t}\n\t\n\texports.default = fetchFavicon;\n\t\n\tfunction fetchFavicon(url, size) {\n\t  return fetchFavicons(url, size).then(function (favicons) {\n\t    var active = favicons.find(function (favicon) {\n\t      return favicon.active;\n\t    });\n\t    return active.href;\n\t  });\n\t}\n\t\n\tfunction fetchFavicons(url, size) {\n\t  return new Promise(function (resolve, reject) {\n\t    getFavicons(url)(function (err, favicons) {\n\t      if (err) {\n\t        return reject(err);\n\t      }\n\t      favicons.push({\n\t        href: Url.resolve(url, 'favicon.ico'),\n\t        name: 'favicon.ico'\n\t      });\n\t\n\t      favicons = favicons.map(function (favicon) {\n\t        var f = {\n\t          href: favicon.href || favicon.content,\n\t          name: favicon.name || favicon.rel || favicon.property,\n\t          size: Math.min.apply(null, (favicon.sizes || '').split(/[^0-9\\.]+/g)) || undefined\n\t        };\n\t\n\t        if (!f.size) {\n\t          delete f.size;\n\t        }\n\t\n\t        return f;\n\t      });\n\t\n\t      markActiveFavicon(favicons, size);\n\t      return resolve(favicons);\n\t    });\n\t  });\n\t}\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"x-ray\");\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"url\");\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t  selectors: ['link[rel=apple-touch-icon-precomposed][href]', 'link[rel=apple-touch-icon][href]', 'link[rel=\"shortcut icon\"][href]', 'link[rel=icon][href]', 'meta[name=msapplication-TileImage][content]', 'meta[name=twitter\\\\:image][content]', 'meta[property=og\\\\:image][content]'],\n\t\n\t  predicates: [function (f, s) {\n\t    return f.name === 'apple-touch-icon-precomposed' && f.size >= s;\n\t  }, function (f, s) {\n\t    return f.name === 'apple-touch-icon' && f.size >= s;\n\t  }, function (f, s) {\n\t    return f.name === 'twitter:image' && f.size >= s;\n\t  }, function (f, s) {\n\t    return f.name === 'shortcut icon' && f.size >= s;\n\t  }, function (f, s) {\n\t    return f.name === 'icon' && f.size >= s;\n\t  }, function (f, s) {\n\t    return f.name === 'og:image' && f.size >= s;\n\t  }, function (f, s) {\n\t    return f.name === 'msapplication-TileImage' && f.size >= s;\n\t  }, function (f, s) {\n\t    return f.name === 'apple-touch-icon-precomposed';\n\t  }, function (f, s) {\n\t    return f.name === 'apple-touch-icon';\n\t  }, function (f, s) {\n\t    return f.name === 'twitter:image';\n\t  }, function (f, s) {\n\t    return f.name === 'shortcut icon';\n\t  }, function (f, s) {\n\t    return f.name === 'icon';\n\t  }, function (f, s) {\n\t    return f.name === 'og:image';\n\t  }, function (f, s) {\n\t    return f.name === 'msapplication-TileImage';\n\t  }, function (f, s) {\n\t    return f.name === 'favicon.ico';\n\t  }]\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = markActiveFavicon;\n\t\n\tvar _config = __webpack_require__(3);\n\t\n\tvar _config2 = _interopRequireDefault(_config);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction markActiveFavicon(favicons, minSize) {\n\t  var _loop = function _loop(i) {\n\t    var result = favicons.find(function (favicon) {\n\t      return _config2.default.predicates[i](favicon, minSize);\n\t    });\n\t    if (result) {\n\t      result.active = true;\n\t      return 'break';\n\t    }\n\t  };\n\t\n\t  for (var i = 0; i < _config2.default.predicates.length; i++) {\n\t    var _ret = _loop(i);\n\t\n\t    if (_ret === 'break') break;\n\t  }\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n//# sourceMappingURL=index.js.map"],"sourceRoot":"/source/"}